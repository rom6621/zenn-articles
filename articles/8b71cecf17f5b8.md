---
title: "React with TypeScript な環境のMyベストプラクティス"
emoji: "🦺"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["react", "typescript", "vite"]
published: false
---

# はじめに

毎回 React (not Next.js) プロジェクトを立ち上げるときに何の設定すればいいんだっけ？となってしまっていたので自分のメモがてら纏めてみる。
こっちの方がいいよーとか理解間違ってるよーがあったら是非コメントで教えていただけると有り難いです 🙏

# プロジェクトの作成

Vite を使用してプロジェクトを作成する。
コンパイラは SWC を使用。

```bash
npm create vite@latest <プロジェクト名> --template react-swc-ts
```

## 参考

https://ja.vitejs.dev/guide/#%E6%9C%80%E5%88%9D%E3%81%AE-vite-%E3%83%95%E3%82%9A%E3%83%AD%E3%82%B7%E3%82%99%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B

# ディレクトリ構成

殆ど [bulletproof-react](https://github.com/alan2207/bulletproof-react) に近い？

https://github.com/alan2207/bulletproof-react

TODO: ディレクトリ構成ツリーの追加

# Linter, Formatter

ESLint x Prettier が王道ですが最近話題の Biome を使うのがマイトレンド

https://biomejs.dev/

## 設定方法

まずはインストール

```bash
npm i -D @biomejs/biome
```

プロジェクトルートに`biome.json`を作成して Biome の設定を行う。
基本はデフォルトのままだが import の自動並び替えだけ設定している。

```json: biome.json
{
  "$schema": "https://biomejs.dev/schemas/1.4.1/schema.json",
  "organizeImports": {
    "enabled": true
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true
    }
  },
  "formatter": {
    "indentStyle": "space"
  }
}
```

## 参考

https://zenn.dev/voluntas/scraps/31de0e6155b43e

# Path Alias の設定

```typescript: pages/hoge.tsx
import { fuga } from "../components/fuga";
```

となってしまうのを

```typescript: pages/hoge.tsx
import { fuga } from "@/components/fuga";
```

でインポートできるようにするための設定。
Next.js だと自動設定できるので Vite でもやってほしい...

## 設定方法

`tsconfig.json`に以下の設定を追加。

```json: tsconfig.json
{
  "compilerOptions": {
    /* Path Alias */
    "baseUrl": "./",
    "paths": {
      "@/*": ["src/*"]
    }
  }
}
```

`vite.config.ts`の plugin に "vite-tsconfig-paths" を追加。

```bash
npm i -D vite-tsconfig-paths
```

```typescript: vite.config.ts
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react-swc";
import tsconfigPaths from "vite-tsconfig-paths";

export default defineConfig({
  plugins: [react(), tsconfigPaths()],
});
```

## 参考

https://zenn.dev/fugithora812/articles/825a3374c10e61

# Jest の導入

テストランナーには Jest を使用します。
まずはインストール。

```bash
npm i -D jest
```

## 各種設定

TypeScript を使用するために transformer を設定する必要があります。
ts-jest を使用します。

```bash
npm i -D ts-jest @types/jest
```

https://jestjs.io/ja/docs/getting-started#typescript-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B

また,
